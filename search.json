[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "R/Medicine 2024 Data Challenge",
    "section": "",
    "text": "This is my attempt at the analyses requested in https://rconsortium.github.io/RMedicine_website/Competition.html. I focused on identifying predictive factors associated with two questions.\n\nOf the potential patients providing data, what factors were associated with succesful randomization?\nDefining compliance as the % of potential study weeks where a patient showed up with a negative test, what factors were associated with higher compliance?\n\n\nShow the code\n# load data and packages\nrequire(tidyverse)\nrequire(public.ctn0094data)\nrequire(public.ctn0094extra)\nrequire(pROC)\nrequire(ggeffects)\nrequire(kableExtra)\nrequire(broom)\nrequire(rms)\nrequire(betareg)\nrequire(scales)\nrequire(emmeans)\nrequire(marginaleffects)"
  },
  {
    "objectID": "index.html#use-bootstrap-validation-to-determine-what-values-are-persistent",
    "href": "index.html#use-bootstrap-validation-to-determine-what-values-are-persistent",
    "title": "R/Medicine 2024 Data Challenge",
    "section": "2.1 Use bootstrap validation to determine what values are persistent",
    "text": "2.1 Use bootstrap validation to determine what values are persistent\n\nShow the code\ncat(\"\\n\\n'Total reported drugs' is cocaine + speed + speedball + opioid + heroin as 0/1 from rbs\\n\\n\")\n\n‘Total reported drugs’ is cocaine + speed + speedball + opioid + heroin as 0/1 from rbs\n\nShow the code\nvalidate_randomization &lt;- validate(lrm_randomization, B = 200, bw = TRUE)\n\n    Backwards Step-down - Original Model\nDeleted Chi-Sq d.f. P Residual d.f. P AIC\njob 0.23 5 0.9988 0.23 5 0.9988 -9.77 education 2.69 3 0.4427 2.92 8 0.9395 -13.08 is_hispanic 0.11 1 0.7370 3.03 9 0.9632 -14.97 is_male 0.17 1 0.6795 3.20 10 0.9763 -16.80 speedball 1.84 1 0.1749 5.04 11 0.9293 -16.96 race 8.97 3 0.0297 14.01 14 0.4493 -13.99 heroin 6.24 1 0.0125 20.25 15 0.1627 -9.75 opioid 5.43 1 0.0198 25.68 16 0.0587 -6.32\nApproximate Estimates after Deleting Factors\n                                     Coef      S.E.  Wald Z         P\nIntercept 0.2726217 0.6201659 0.4396 6.602e-01 age -0.0731720 0.0295826 -2.4735 1.338e-02 age^2 0.0005492 0.0003716 1.4780 1.394e-01 marital=Never married 0.1830554 0.2178662 0.8402 4.008e-01 marital=Separated/Divorced/Widowed 0.2124224 0.2446399 0.8683 3.852e-01 marital=Missing -0.9641235 0.1857561 -5.1903 2.100e-07 total_reported_drugs=1 3.7372456 0.2154768 17.3441 0.000e+00 total_reported_drugs=2 3.6986121 0.2124678 17.4079 0.000e+00 total_reported_drugs=3 3.6472251 0.2211314 16.4935 0.000e+00 total_reported_drugs=4 3.8151182 0.2815350 13.5511 0.000e+00 total_reported_drugs=5 3.4882191 0.4293229 8.1249 4.441e-16\nFactors in Final Model\n[1] age marital total_reported_drugs\n\nShow the code\nsummary(attr(validate_randomization, \"kept\")) %&gt;%\n  kable() %&gt;%\n  kable_styling()\n\n\n\n\n\n\nage\njob\neducation\nmarital\nis_male\nis_hispanic\nrace\ntotal_reported_drugs\nheroin\nspeedball\nopioid\n\n\n\n\n\nMode :logical\nMode :logical\nMode :logical\nMode :logical\nMode :logical\nMode :logical\nMode :logical\nMode:logical\nMode :logical\nMode :logical\nMode :logical\n\n\n\nFALSE:1\nFALSE:199\nFALSE:180\nFALSE:15\nFALSE:197\nFALSE:187\nFALSE:137\nTRUE:200\nFALSE:142\nFALSE:182\nFALSE:121\n\n\n\nTRUE :199\nTRUE :1\nTRUE :20\nTRUE :185\nTRUE :3\nTRUE :13\nTRUE :63\nNA\nTRUE :58\nTRUE :18\nTRUE :79\n\n\n\n\n\n\n\nShow the code\nlrm_final &lt;- lrm(randomization ~ pol(age, 2) + marital + total_reported_drugs, randomization_tbl, x = TRUE, y = TRUE, penalty = 1)\n\nrandomization_tbl$predict_randomization &lt;- predict(lrm_final, type = \"fitted\")\n\ncat(\"\\n\\n## Project 51 has almost perfect predicted randomization compared to other two (age not reported for non-randomized 51 patients)\\n\\n\")"
  },
  {
    "objectID": "index.html#project-51-has-almost-perfect-predicted-randomization-compared-to-other-two-age-not-reported-for-non-randomized-51-patients",
    "href": "index.html#project-51-has-almost-perfect-predicted-randomization-compared-to-other-two-age-not-reported-for-non-randomized-51-patients",
    "title": "R/Medicine 2024 Data Challenge",
    "section": "2.2 Project 51 has almost perfect predicted randomization compared to other two (age not reported for non-randomized 51 patients)",
    "text": "2.2 Project 51 has almost perfect predicted randomization compared to other two (age not reported for non-randomized 51 patients)\n\nShow the code\nggemmeans(update(lrm_final,.~.+project),\"project\") %&gt;% as.data.frame()   %&gt;% dplyr::select(project=x, predicted, conf.low, conf.high) %&gt;% kable() %&gt;% kable_styling()\n\n\n\n\n\nproject\npredicted\nconf.low\nconf.high\n\n\n\n\n27\n0.6509355\n0.5791867\n0.7164402\n\n\n30\n0.7240205\n0.6693301\n0.7727367\n\n\n51\n0.9940233\n0.9824580\n0.9979793\n\n\n\n\n\n\n\nShow the code\ncat(\"\\n\\n## Use bootstrap validtion to determine what values are persistent\\n\\n\")"
  },
  {
    "objectID": "index.html#use-bootstrap-validtion-to-determine-what-values-are-persistent",
    "href": "index.html#use-bootstrap-validtion-to-determine-what-values-are-persistent",
    "title": "R/Medicine 2024 Data Challenge",
    "section": "2.3 Use bootstrap validtion to determine what values are persistent",
    "text": "2.3 Use bootstrap validtion to determine what values are persistent\n\nShow the code\ncoef &lt;- coefficients(lrm_final)\nse &lt;- sqrt(diag(vcov(lrm_final)))\n\ncat(\"\\n\\n## Final logistic regression model predicting successful randomization (log-odds)\\n\\n\")"
  },
  {
    "objectID": "index.html#final-logistic-regression-model-predicting-successful-randomization-log-odds",
    "href": "index.html#final-logistic-regression-model-predicting-successful-randomization-log-odds",
    "title": "R/Medicine 2024 Data Challenge",
    "section": "2.4 Final logistic regression model predicting successful randomization (log-odds)",
    "text": "2.4 Final logistic regression model predicting successful randomization (log-odds)\n\nShow the code\ncat(\"\\n\\n(factor reference levels based on alphabetical order)\\n\\n\")\n\n(factor reference levels based on alphabetical order)\n\nShow the code\ntibble(term = names(coef), coef, se) %&gt;%\n  mutate(p = 2 * case_when(coef &gt; 0 ~ pnorm(coef / se, lower.tail = FALSE), TRUE ~ pnorm(coef / se, lower.tail = TRUE))) %&gt;%\n  kable() %&gt;%\n  kable_styling() %&gt;%\n  pack_rows(\"Marital (ref level Married or Partnered)\", 4, 6) %&gt;%\n  pack_rows(\"Total Reported Drugs (reference level 0)\", 7, 11)\n\n\n\n\n\nterm\ncoef\nse\np\n\n\n\n\nIntercept\n0.1741456\n0.6158886\n0.7773647\n\n\nage\n-0.0722803\n0.0294367\n0.0140707\n\n\nage^2\n0.0005367\n0.0003702\n0.1471491\n\n\nMarital (ref level Married or Partnered)\n\n\nmarital=Never married\n0.1860933\n0.2177973\n0.3928649\n\n\nmarital=Separated/Divorced/Widowed\n0.2180355\n0.2447502\n0.3730099\n\n\nmarital=Missing\n-0.9700294\n0.1860135\n0.0000002\n\n\nTotal Reported Drugs (reference level 0)\n\n\ntotal_reported_drugs=1\n3.8333471\n0.2133380\n0.0000000\n\n\ntotal_reported_drugs=2\n3.8023090\n0.2102814\n0.0000000\n\n\ntotal_reported_drugs=3\n3.7605650\n0.2188092\n0.0000000\n\n\ntotal_reported_drugs=4\n3.9294689\n0.2790591\n0.0000000\n\n\ntotal_reported_drugs=5\n3.5772414\n0.4260219\n0.0000000\n\n\n\n\n\n\n\nShow the code\ncalibrate_final &lt;- calibrate(lrm_final, B = 200)\n\ncalibrate_tbl &lt;-\n  calibrate_final[, c(\"predy\", \"calibrated.orig\", \"calibrated.corrected\")] %&gt;%\n  as_tibble() %&gt;%\n  pivot_longer(calibrated.orig:calibrated.corrected)\n\ncat(\"\\n\\n## Show calibration (predicted vs actual) for predictive model of randomization\\n\\n\")"
  },
  {
    "objectID": "index.html#show-calibration-predicted-vs-actual-for-predictive-model-of-randomization",
    "href": "index.html#show-calibration-predicted-vs-actual-for-predictive-model-of-randomization",
    "title": "R/Medicine 2024 Data Challenge",
    "section": "2.5 Show calibration (predicted vs actual) for predictive model of randomization",
    "text": "2.5 Show calibration (predicted vs actual) for predictive model of randomization\n\nShow the code\ncalibrate_tbl %&gt;%\n  ggplot(aes(x = predy, y = value, color = name)) +\n  geom_line(linewidth = 1) +\n  theme_bw() +\n  labs(color = \"calibration\", x = \"Predicted Probability\", y = \"Actual Probability\") +\n  theme(legend.position = c(0.8, 0.2)) +\n  geom_abline(linetype = \"dashed\")\n\n\n\nShow the code\nauc &lt;- ci.auc(roc(randomization ~ predict_randomization, data = randomization_tbl %&gt;% filter(!is.na(predict_randomization))))\n\ncat(sprintf(\"\\n\\n## ROC curve AUC is %0.2f (95 percent CI %0.2f - %0.2f)\\n\\n\", auc[2], auc[1], auc[3]))"
  },
  {
    "objectID": "index.html#roc-curve-auc-is-0.81-95-percent-ci-0.79---0.83",
    "href": "index.html#roc-curve-auc-is-0.81-95-percent-ci-0.79---0.83",
    "title": "R/Medicine 2024 Data Challenge",
    "section": "2.6 ROC curve AUC is 0.81 (95 percent CI 0.79 - 0.83)",
    "text": "2.6 ROC curve AUC is 0.81 (95 percent CI 0.79 - 0.83)\n\nShow the code\nplot(roc(randomization ~ predict_randomization, data = randomization_tbl %&gt;% filter(!is.na(predict_randomization))))\n\n\n\nShow the code\ncat(\"\\n\\n\")\n\n\nShow the code\ncat(\"\\n\\n## Estimated marginal means\\n\\n\")"
  },
  {
    "objectID": "index.html#estimated-marginal-means",
    "href": "index.html#estimated-marginal-means",
    "title": "R/Medicine 2024 Data Challenge",
    "section": "2.7 Estimated marginal means",
    "text": "2.7 Estimated marginal means\n\nShow the code\ncat(\"\\n\\n### Marital\\n\\n\")\n\n\n2.7.1 Marital\n\nShow the code\nplot(ggemmeans(lrm_final, \"marital\"))\n\n\n\nShow the code\ncat(\"\\n\\n\")\n\n\nShow the code\ntest_predictions(lrm_final, \"marital\") %&gt;%\n  kable() %&gt;%\n  kable_styling()\n\n\n\n\n\nmarital\nContrast\nconf.low\nconf.high\np.value\n\n\n\n\nMarried or Partnered-Never married\n-0.0252404\n-0.0824855\n0.0320046\n0.3874862\n\n\nMarried or Partnered-Separated/Divorced/Widowed\n-0.0298955\n-0.0961135\n0.0363225\n0.3762287\n\n\nMarried or Partnered-Missing\n0.0870519\n0.0348838\n0.1392201\n0.0010734\n\n\nNever married-Separated/Divorced/Widowed\n-0.0046551\n-0.0666364\n0.0573262\n0.8829721\n\n\nNever married-Missing\n0.1122923\n0.0624778\n0.1621069\n0.0000100\n\n\nSeparated/Divorced/Widowed-Missing\n0.1169474\n0.0563531\n0.1775418\n0.0001551\n\n\n\n\n\n\n\nShow the code\ncat(\"\\n\\n### Total reported drugs\\n\\n\")\n\n\n\n2.7.2 Total reported drugs\n\nShow the code\nplot(ggemmeans(lrm_final, \"total_reported_drugs\"))\n\n\n\nShow the code\ncat(\"\\n\\n\")\n\n\nShow the code\ntest_predictions(lrm_final, \"total_reported_drugs\") %&gt;%\n  kable() %&gt;%\n  kable_styling()\n\n\n\n\n\ntotal_reported_drugs\nContrast\nconf.low\nconf.high\np.value\n\n\n\n\n0-1\n-0.7408890\n-0.7933182\n-0.6884598\n0.0000000\n\n\n0-2\n-0.7378239\n-0.7897550\n-0.6858928\n0.0000000\n\n\n0-3\n-0.7335837\n-0.7869992\n-0.6801682\n0.0000000\n\n\n0-4\n-0.7499212\n-0.8116047\n-0.6882376\n0.0000000\n\n\n0-5\n-0.7132936\n-0.8138319\n-0.6127554\n0.0000000\n\n\n1-2\n0.0030651\n-0.0206425\n0.0267727\n0.7999593\n\n\n1-3\n0.0073053\n-0.0197899\n0.0344004\n0.5971954\n\n\n1-4\n-0.0090321\n-0.0490508\n0.0309865\n0.6582287\n\n\n1-5\n0.0275954\n-0.0627017\n0.1178925\n0.5491874\n\n\n2-3\n0.0042402\n-0.0220300\n0.0305104\n0.7517362\n\n\n2-4\n-0.0120972\n-0.0516237\n0.0274293\n0.5486031\n\n\n2-5\n0.0245303\n-0.0654250\n0.1144856\n0.5930158\n\n\n3-4\n-0.0163374\n-0.0578999\n0.0252251\n0.4410482\n\n\n3-5\n0.0202901\n-0.0704499\n0.1110301\n0.6611965\n\n\n4-5\n0.0366275\n-0.0585622\n0.1318173\n0.4507509\n\n\n\n\n\n\n\nShow the code\ncat(\"\\n\\n### Age\\n\\n\")\n\n\n\n2.7.3 Age\n\nShow the code\nplot(ggemmeans(lrm_final, \"age[all]\"))\n\n\n\nShow the code\ncat(\"\\n\\n### Age (per project, not counting 51)\\n\\n\")\n\n\n\n2.7.4 Age (per project, not counting 51)\n\nShow the code\nggplot(randomization_tbl,aes(x=age, color=project, fill=project, y=as.numeric(as.character(randomization)))) + geom_smooth() + theme_bw() + labs(y=\"Observed Probability of randomzation\")"
  },
  {
    "objectID": "index.html#beta-regression-coefficients-factor-reference-levels-based-on-alphabetical-order",
    "href": "index.html#beta-regression-coefficients-factor-reference-levels-based-on-alphabetical-order",
    "title": "R/Medicine 2024 Data Challenge",
    "section": "3.1 Beta regression coefficients (factor reference levels based on alphabetical order)",
    "text": "3.1 Beta regression coefficients (factor reference levels based on alphabetical order)\n\nShow the code\ncat(\"\\n\\n### Compliance\\n\\n\")\n\n\n3.1.1 Compliance\n\nShow the code\ntidy(beta_compliance_red) %&gt;%\n  dplyr::select(-statistic) %&gt;%\n  kable() %&gt;%\n  kable_styling() %&gt;%\n  pack_rows(\"Race (reference level Black)\", 3, 5) %&gt;%\n  pack_rows(\"job (reference level Full Time)\", 6, 10) %&gt;%\n  pack_rows(\"Marital (ref level Married or Partnered)\", 11, 13)\n\n\n\n\n\ncomponent\nterm\nestimate\nstd.error\np.value\n\n\n\n\nmean\n(Intercept)\n-1.4656202\n0.1722355\n0.0000000\n\n\nmean\nage\n0.0077218\n0.0025338\n0.0023075\n\n\nRace (reference level Black)\n\n\nmean\nraceOther\n-0.0000154\n0.1035300\n0.9998809\n\n\nmean\nraceRefused/missing\n-0.1131639\n0.3348571\n0.7354034\n\n\nmean\nraceWhite\n0.1482887\n0.0878694\n0.0914874\n\n\njob (reference level Full Time)\n\n\nmean\njobOther\n0.3114931\n0.1846286\n0.0915776\n\n\nmean\njobPart Time\n-0.1640795\n0.0855055\n0.0549926\n\n\nmean\njobStudent\n-0.2596616\n0.1956821\n0.1845232\n\n\nmean\njobUnemployed\n0.0299534\n0.0846908\n0.7235793\n\n\nmean\njobMissing\n-0.5690129\n0.6021055\n0.3446392\n\n\nMarital (ref level Married or Partnered)\n\n\nmean\nmaritalNever married\n0.2686716\n0.0884782\n0.0023927\n\n\nmean\nmaritalSeparated/Divorced/Widowed\n0.2431355\n0.1008997\n0.0159667\n\n\nmean\nmaritalMissing\n0.5755636\n0.6054473\n0.3417862\n\n\nmean\nheroin1\n-0.1291437\n0.0619663\n0.0371516\n\n\nmean\nopioid1\n0.2627274\n0.0567428\n0.0000037\n\n\nprecision\n(phi)\n1.2804061\n0.0325090\n0.0000000\n\n\n\n\n\n\n\nShow the code\ncat(\"\\n\\n### No major difference between Projects\\n\\n\")\n\n\n\n3.1.2 No major difference between Projects\n\nShow the code\ncat(\"\\n\\nUpdate models by adding project and look for marginal means between projects\\n\\n\")\n\nUpdate models by adding project and look for marginal means between projects\n\nShow the code\ncat(\"\\n\\n#### Compliance\\n\\n\")\n\n\n3.1.2.1 Compliance\n\nShow the code\nggemmeans(update(beta_compliance_red,.~.+project),\"project\") %&gt;% as.data.frame()   %&gt;% dplyr::select(project=x, predicted, conf.low, conf.high) %&gt;% kable() %&gt;% kable_styling()\n\n\n\n\n\nproject\npredicted\nconf.low\nconf.high\n\n\n\n\n27\n0.2862537\n0.2271404\n0.3453670\n\n\n30\n0.2495486\n0.1970343\n0.3020629\n\n\n51\n0.3312811\n0.2736646\n0.3888977\n\n\n\n\n\n\n\nShow the code\ncat(\"\\n\\n#### Attendance\\n\\n\")\n\n\n\n3.1.2.2 Attendance\n\nShow the code\nggemmeans(update(beta_attendance_red,.~.+project),\"project\") %&gt;% as.data.frame()   %&gt;% dplyr::select(project=x, predicted, conf.low, conf.high) %&gt;% kable() %&gt;% kable_styling()\n\n\n\n\n\nproject\npredicted\nconf.low\nconf.high\n\n\n\n\n27\n0.4234444\n0.3310894\n0.5157993\n\n\n30\n0.4437619\n0.3556613\n0.5318625\n\n\n51\n0.4345425\n0.3448335\n0.5242516\n\n\n\n\n\n\n\nShow the code\ncat(\"\\n\\n### Attendance\\n\\n\")\n\n\n\n\n3.1.3 Attendance\n\nShow the code\ntidy(beta_attendance_red) %&gt;%\n  dplyr::select(-statistic) %&gt;%\n  kable() %&gt;%\n  kable_styling() %&gt;%\n  pack_rows(\"Job (reference level Full Time)\", 3, 7) %&gt;%\n  pack_rows(\"Is living stable (reference level No)\", 8, 9) %&gt;%\n  pack_rows(\"Marital (ref level Married or Partnered)\", 10, 12)\n\n\n\n\n\ncomponent\nterm\nestimate\nstd.error\np.value\n\n\n\n\nmean\n(Intercept)\n-1.1593638\n0.2248213\n0.0000003\n\n\nmean\nage\n0.0075580\n0.0024485\n0.0020234\n\n\nJob (reference level Full Time)\n\n\nmean\njobOther\n0.3098685\n0.1813007\n0.0874248\n\n\nmean\njobPart Time\n-0.1632520\n0.0856712\n0.0567067\n\n\nmean\njobStudent\n0.0124950\n0.1970223\n0.9494328\n\n\nmean\njobUnemployed\n0.0808107\n0.0845202\n0.3390160\n\n\nmean\njobMissing\n-0.7457840\n0.8317397\n0.3699027\n\n\nIs living stable (reference level No)\n\n\nmean\nis_living_stableYes\n0.3387088\n0.1782797\n0.0574498\n\n\nmean\nis_living_stableMissing\n1.2729703\n1.1954770\n0.2869565\n\n\nMarital (ref level Married or Partnered)\n\n\nmean\nmaritalNever married\n0.2358692\n0.0874130\n0.0069688\n\n\nmean\nmaritalSeparated/Divorced/Widowed\n0.0987595\n0.1001031\n0.3238495\n\n\nmean\nmaritalMissing\n0.0036187\n0.8424911\n0.9965729\n\n\nmean\nopioid1\n0.2378354\n0.0517281\n0.0000043\n\n\nmean\nspeed1\n-0.1193640\n0.0573867\n0.0375262\n\n\nprecision\n(phi)\n1.4512074\n0.0337427\n0.0000000\n\n\n\n\n\n\n\nShow the code\ncat(\"\\n\\n## Estimated marginal means\\n\\n\")"
  },
  {
    "objectID": "index.html#estimated-marginal-means-1",
    "href": "index.html#estimated-marginal-means-1",
    "title": "R/Medicine 2024 Data Challenge",
    "section": "3.2 Estimated marginal means",
    "text": "3.2 Estimated marginal means\n\nShow the code\ncat(\"\\n\\n### Age\\n\\n\")\n\n\n3.2.1 Age\n\nShow the code\nemm_compliance_age &lt;- ggemmeans(beta_compliance_red, \"age\") %&gt;% mutate(outcome=\"compliance\")\nemm_attendance_age &lt;- ggemmeans(beta_attendance_red, \"age\") %&gt;% mutate(outcome=\"attendance\")\n\nbind_rows(emm_attendance_age, emm_compliance_age) %&gt;%\n  ggplot(aes(x=x, y=predicted, ymax=conf.high, ymin=conf.low, color=outcome, fill=outcome)) + geom_smooth() + theme_bw() +scale_y_continuous(label=percent) + geom_ribbon(alpha=0.5, color=NA) + labs(y=\"Estimate\",x=\"Age\") + theme(legend.position = \"bottom\")\n\n\n\nShow the code\ncat(\"\\n\\n### Age (raw data) \\n\\n\")\n\n\n\n3.2.2 Age (raw data)\n\nShow the code\ncompliance_results %&gt;% ungroup() %&gt;% dplyr::select(compliance, attendance, age) %&gt;% pivot_longer(-age) %&gt;% ggplot(aes(x=age,y=value, color=name, fill=name)) + geom_point(alpha=0.25) + geom_smooth() + theme_bw() + labs(color=\"Outcome\", fill=\"Outcome\", y=\"Rate\") + theme(legend.position = \"bottom\") + scale_y_continuous(label=percent)\n\n\n\nShow the code\ncat(\"\\n\\n### Marital\\n\\n\")\n\n\n\n3.2.3 Marital\n\nShow the code\nemm_compliance_marital &lt;- ggemmeans(beta_compliance_red, \"marital\") %&gt;% mutate(outcome=\"compliance\") %&gt;% as.data.frame()\nemm_attendance_marital &lt;- ggemmeans(beta_attendance_red, \"marital\") %&gt;% mutate(outcome=\"attendance\")%&gt;% as.data.frame()\nbind_rows(emm_attendance_marital, emm_compliance_marital) %&gt;%\n  filter(!is.na(x)) %&gt;%\n  ggplot(aes(y=x, x=predicted, xmax=conf.high, xmin= predicted, color=outcome, fill=outcome, group=outcome)) + geom_bar(stat=\"identity\", position=\"dodge\") + geom_errorbar(position=\"dodge\") + theme_bw() + theme(legend.position = \"bottom\") + scale_x_continuous(label=percent) + labs(y=\"Marital\", x=\"Estimate\") + facet_grid(~outcome)\n\n\n\nShow the code\ncat(\"\\n\\n### Job\\n\\n\")\n\n\n\n3.2.4 Job\n\nShow the code\nemm_compliance_job &lt;- ggemmeans(beta_compliance_red, \"job\") %&gt;% mutate(outcome=\"compliance\") %&gt;% as.data.frame()\nemm_attendance_job &lt;- ggemmeans(beta_attendance_red, \"job\") %&gt;% mutate(outcome=\"attendance\")%&gt;% as.data.frame()\nbind_rows(emm_attendance_job, emm_compliance_job) %&gt;%\n  filter(!is.na(x)) %&gt;%\n  ggplot(aes(y=x, x=predicted, xmax=conf.high, xmin= predicted, color=outcome, fill=outcome, group=outcome)) + geom_bar(stat=\"identity\", position=\"dodge\") + geom_errorbar(position=\"dodge\") + theme_bw() + theme(legend.position = \"bottom\") + scale_x_continuous(label=percent) + labs(y=\"Job\", x=\"Estimate\") + facet_grid(~outcome)\n\n\n\nShow the code\ncat(\"\\n\\n### Opioid\\n\\n\")\n\n\n\n3.2.5 Opioid\n\nShow the code\nemm_compliance_opioid &lt;- ggemmeans(beta_compliance_red, \"opioid\") %&gt;% mutate(outcome=\"compliance\") %&gt;% as.data.frame()\nemm_attendance_opioid &lt;- ggemmeans(beta_attendance_red, \"opioid\") %&gt;% mutate(outcome=\"attendance\")%&gt;% as.data.frame()\nbind_rows(emm_attendance_opioid, emm_compliance_opioid) %&gt;%\n  filter(!is.na(x)) %&gt;%\n  ggplot(aes(y=x, x=predicted, xmax=conf.high, xmin= predicted, color=outcome, fill=outcome, group=outcome)) + geom_bar(stat=\"identity\", position=\"dodge\") + geom_errorbar(position=\"dodge\") + theme_bw() + theme(legend.position = \"bottom\") + scale_x_continuous(label=percent) + labs(y=\"opioid\", x=\"Estimate\") + facet_grid(~outcome)\n\n\n\nShow the code\n#test_predictions(beta_compliance_red, \"marital\") %&gt;%\n#  kable() %&gt;%\n#  kable_styling()\n\ncat(\"\\n\\n### Race (compliance alone)\\n\\n\")\n\n\n\n3.2.6 Race (compliance alone)\n\nShow the code\nplot(ggemmeans(beta_compliance_red, \"race\"))\n\n\n\nShow the code\ncat(\"\\n\\n### Heroin (compliance alone)\\n\\n\")\n\n\n\n3.2.7 Heroin (compliance alone)\n\nShow the code\nplot(ggemmeans(beta_compliance_red, \"heroin\"))\n\n\n\nShow the code\ncat(\"\\n\\n### Speed (attendance alone)\\n\\n\")\n\n\n\n3.2.8 Speed (attendance alone)\n\nShow the code\nplot(ggemmeans(beta_attendance_red, \"speed\"))\n\n\n\nShow the code\ncat(\"\\n\\n### Is living stable (attendance alone)\\n\\n\")\n\n\n\n3.2.9 Is living stable (attendance alone)\n\nShow the code\nplot(ggemmeans(beta_attendance_red, \"is_living_stable\"))"
  }
]